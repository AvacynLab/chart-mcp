version: "3.9"

services:
  app:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    environment:
      - API_TOKEN=
      - EXCHANGE=binance
      - ALLOWED_ORIGINS=http://localhost:3000
      - LLM_PROVIDER=stub
      - LLM_MODEL=heuristic-v1
      - STREAM_HEARTBEAT_MS=5000
      - LOG_LEVEL=INFO
    ports:
      - "8000:8000"
    volumes:
      - ../src:/app/src:ro
      - ../.env:/app/.env:ro
    command: ["uvicorn", "chart_mcp.app:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
